<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto&family=Roboto+Mono&family=Cedarville+Cursive&family=Noto+Sans+SC&family=ZCOOL+QingKe+HuangYou&family=Ma+Shan+Zheng&display=swap"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="styles/style.css">
    <script src="scripts/utilities.js"></script>
    <script src="scripts/themes.js"></script>
    <script src="scripts/texteffects.js"></script>
    <title>hanbo.li</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
</head>

<!-- 
    Notes: 
        - card elements should be interchangeable but follow some rules:
            - each card should be self-contained
            - left/right-box cards contain mouse hover effects and some text, maybe link to something
            - main-box card should have some passive animation, maybe some functions of mouse position or scroll
            - header-box card ???
        - eventually, want to randomise card selection or have some button which loads different cards
 -->

<body class="theme-1">

<header class="container">
    <nav>
        <div class="top-left-nav">
            <!-- TODO: create animated svg logo, probably a meme -->
            <!-- <img class="logoface" src="#" alt="logoface"> -->
            <h1 class="sitename | text-3xl tight-layout">
                <a href="#" class="text-hacker">hanbo.li</a>
                <!-- <a href="#" class="text-hacker" style="font-family:var(--ff-mono-chinese);">栗瀚博</a> -->
            </h1>
            <button type="button" onclick="switchTheme()">
                Switch Theme
                <!-- https://www.svgrepo.com/svg/10005/light-bulb -->
                <svg class="clickable" height="100%" width="100%" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                    xmlns:xlink="http://www.w3.org/1999/xlink">
                    <!-- lightbulb glowing animation applied as an animated svg filter -->
                    <filter id="lightbulb-glow-filter" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur result="blurOut" stdDeviation="20" >
                            <animate attributeName="stdDeviation" calcMode="paced" begin="0s" dur="2s" values="0;50;0;" repeatCount="indefinite"/>
                        </feGaussianBlur>
                        <feBlend in="SourceGraphic" in2="blurOut" />
                    </filter>
                    <g class="lightbulb-glow">
                        <path
                            d="m363.9,54.2c-31.2-29.8-72.3-45.1-115.4-43-77.6,3.6-141.3,64.6-148.1,141.9-3.7,41.3 8.8,81.6 35,113.4 26.4,32.1 48,89 48,126.9 0,0-2.1,13.8 10.4,14.4h124.7c13.6-1 10.4-17 10.4-17 0-37 21.1-92.3 47.1-123.3 23.5-28 36.4-63.6 36.4-100.1-0.1-43.2-17.3-83.4-48.5-113.2zm-116.1,332.7l-24-145.9h64.5l-24,145.9h-16.5zm112.1-132.9c-28.3,33.7-50.6,91.2-51.9,132.8h-22.6l25.5-154.6c0.7-3.2-0.7-11.6-10.3-12.1h-89c-9.2,0.3-11,9-10.3,12.1l25.5,154.6h-22.7c-2.1-42.3-24.5-99.6-52.6-133.7-22.7-27.5-33.5-62.4-30.3-98.3 5.8-66.8 61-119.6 128.2-122.8 37.5-1.8 73,11.5 100,37.3 27.1,25.8 42,60.6 42,98 0.1,31.7-11.1,62.5-31.5,86.7z" 
                            filter="url(#lightbulb-glow-filter)"
                            >
                        </path>
                    </g>
                    <g class="lightbulb">
                        <path
                            d="m363.9,54.2c-31.2-29.8-72.3-45.1-115.4-43-77.6,3.6-141.3,64.6-148.1,141.9-3.7,41.3 8.8,81.6 35,113.4 26.4,32.1 48,89 48,126.9 0,0-2.1,13.8 10.4,14.4h124.7c13.6-1 10.4-17 10.4-17 0-37 21.1-92.3 47.1-123.3 23.5-28 36.4-63.6 36.4-100.1-0.1-43.2-17.3-83.4-48.5-113.2zm-116.1,332.7l-24-145.9h64.5l-24,145.9h-16.5zm112.1-132.9c-28.3,33.7-50.6,91.2-51.9,132.8h-22.6l25.5-154.6c0.7-3.2-0.7-11.6-10.3-12.1h-89c-9.2,0.3-11,9-10.3,12.1l25.5,154.6h-22.7c-2.1-42.3-24.5-99.6-52.6-133.7-22.7-27.5-33.5-62.4-30.3-98.3 5.8-66.8 61-119.6 128.2-122.8 37.5-1.8 73,11.5 100,37.3 27.1,25.8 42,60.6 42,98 0.1,31.7-11.1,62.5-31.5,86.7z"
                            >
                        </path>
                        <path
                            d="m319.7,433.9h-127.4c-5.8,0-10.4,4.7-10.4,10.4 0,5.8 4.7,10.4 10.4,10.4h9.7c4.1,26.1 26.7,46.2 54,46.2 27.3,0 49.9-20.1 54-46.2h9.7c5.8,0 10.4-4.7 10.4-10.4 5.68434e-14-5.7-4.6-10.4-10.4-10.4zm-63.7,46.2c-15,0-27.7-9.8-32.1-23.3h64.2c-4.4,13.5-17.1,23.3-32.1,23.3z"
                            >
                        </path>
                    </g>
                </svg>
            </button>
            <button type="button" onclick="switchTextEffects()">
                Switch Text Effects
                <!-- https://www.svgrepo.com/svg/51643/rocket-launch -->
                <svg class="clickable" height="100%" width="100%" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                    xmlns:xlink="http://www.w3.org/1999/xlink">
                    <!-- flames from https://codepen.io/PaulLeBeau/pen/EQoraz -->
                    <defs>
                        <filter id="flames" filterUnits="objectBoundingBox" x="0%" y="-100%" width="100%" height="300%">
                            <feTurbulence type="fractalNoise" baseFrequency="0.03" numOctaves="1" result="noise" stitchTiles="stitch"/>
                            <feOffset dy="0" result="off1">
                                <animate attributeType="XML" attributeName="dy" from="-300" to="0" dur="3s" repeatCount="indefinite" /> 
                            </feOffset>
                            <feOffset in="noise" dy="60" result="off2">
                                <animate attributeType="XML" attributeName="dy" from="0" to="300" dur="3s" repeatCount="indefinite" /> 
                            </feOffset>
                            <feMerge result="scrolling-noise">
                                <feMergeNode in="off1"/>
                                <feMergeNode in="off2"/>
                            </feMerge>
                            <feComponentTransfer result="brighter-noise">
                                <feFuncA type="gamma" amplitude="1" exponent="1"/>
                            </feComponentTransfer>
                            <feComposite in="SourceGraphic" in2="brighter-noise" operator="in" result="gradient-noise"/>
                            <feComponentTransfer result="threshhold">
                                <feFuncA type="discrete" tableValues="0 1"/>
                            </feComponentTransfer>
                            <feFlood flood-color="var(--accent)" result="flood1"/>
                            <feComposite in2="threshhold" in="flood1" operator="in" result="flood1-threshhold"/>
                            <feFlood flood-color="var(--primary)" result="flood2"/>
                            <feComponentTransfer in="SourceGraphic" result="exponent-gradient">
                                <feFuncA type="gamma" exponent="3"/>
                            </feComponentTransfer>
                            <feComposite in="flood2" in2="exponent-gradient" operator="in" result="flood2-gradient"/>
                            <feComposite in2="threshhold" in="flood2-gradient" operator="in" result="flood2-gradient-threshhold"/>
                            <feMerge>
                                <feMergeNode in="flood1-threshhold"/>
                                <feMergeNode in="flood2-gradient-threshhold"/>
                            </feMerge>
                        </filter>
                        <!-- too processor heavy -->
                        <filter id="flame-blur">
                            <feGaussianBlur in="SourceGraphic" stdDeviation="7" />
                            <feMerge>
                            <feMergeNode/>
                            <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                        <linearGradient id="flame-grad" x1="0" y1="0" x2="0" y2="1" color-interpolation="linearRGB">
                            <stop offset="0" stop-color="#fff" stop-opacity="1"/>
                            <stop offset="1" stop-color="#fff" stop-opacity="0.4"/>
                        </linearGradient>
                        <radialGradient id="fade" cx="0.5" cy="0" r="1" color-interpolation="sRGB">
                            <stop offset="0.5" stop-color="#fff"/>
                            <stop offset="0.7" stop-color="#000"/>
                        </radialGradient>
                        <mask id="flame-shape" maskContentUnits = "objectBoundingBox">
                            <circle cx="0.5" cy="0.28" r="0.28" fill="white"/>
                            <!-- <polygon points="0.22,0.70, 0.35,0, 0.65,0, 0.78,0.70" fill="url(#fade)"/> -->
                            <!-- <polygon points="0.22,0.70, 0.2,0, 0.8,0, 0.78,0.70" fill="url(#fade)"/> -->
                            <polygon points="0.22,0.3, 0.26,1, 0.74,1, 0.78,0.3" fill="url(#fade)"/>
                        </mask>
                    </defs>
                    <g class="rocket-flames">
                        <rect x="76" y="375" width="360" height="300" fill="url(#flame-grad)" filter="url(#flames)" mask="url(#flame-shape)"/>
                    </g>
                    <g class="rocket">
                        <path
                            d="m350.3,255.1c7.9-87.6-22.7-176.9-86.9-241.1-3.9-3.9-10.8-3.9-14.7,0-64.2,64.2-94.8,153.4-86.9,241.1-22.2,23.9-34.4,54.7-34.4,87.5 0,33.1 12.6,64.6 35.5,88.6 5.6,5.9 19.9,3.2 17.6-9.8-1.2-6.8-2.7-13.4-2.7-19.9 0-16.2 4.9-31.6 14-44.6 1.5,0.8 3.2,1.3 5,1.3h118.5c1.8,0 3.5-0.5 5-1.3 9.1,13 14,28.4 14,44.6 0,6.5-1.7,13-2.7,19.9-2.1,14.4 12.9,14.9 17.6,9.8 22.8-24.1 35.5-55.5 35.5-88.6-0.1-32.8-12.2-63.7-34.4-87.5zm-94.3-218.7c18.6,20 33.8,42.5 45.6,66.4h-91.1c11.7-24 26.9-46.4 45.5-66.4zm-98,351c-6.4-13.9-9.7-29.1-9.7-44.8 0-21.2 6.1-41.5 17.5-58.9 0.1,0.8 11,42.5 15.2,53.2-12.5,14.4-20.4,31.8-23,50.5zm150.4-50.1h-104.8c-29.4-69-29.1-146.1-2.4-213.8h109.6c26.7,67.7 27,144.8-2.4,213.8zm22.7-.4c5.8-14.9 15.1-52.6 15.2-53.2 11.4,17.3 17.5,37.6 17.5,58.9 0,15.7-3.4,30.9-9.7,44.8-2.7-18.7-10.6-36.1-23-50.5z">
                        </path>
                    </g>
                </svg>
            </button>
            <button type="button" onclick="">
                Switch Cards
                <!-- https://www.svgrepo.com/svg/95443/puzzle -->
                <svg class="clickable" height="100%" width="100%" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" 
                    xmlns:xlink="http://www.w3.org/1999/xlink">
                    <g class="puzzle">
                        <path 
                            d="m308.6,433.9h77.4v-99.7c0-4.2 2.7-7.9 6.7-9.2 4-1.3 8.4,0.2 10.8,3.6 8.1,11.5 21.2,18.3 35.2,18.3 23.7,0 43.1-19.3 43.1-43.1 0-23.7-19.3-43.1-43.1-43.1-14,0-27.1,6.8-35.2,18.3-2.4,3.4-6.8,4.9-10.8,3.6-4-1.3-6.7-5-6.7-9.2v-99.7h-99.7c-4.2,0-7.9-2.7-9.2-6.7-1.3-4 0.2-8.4 3.6-10.8 11.5-8.1 18.3-21.2 18.3-35.2 0-23.7-19.3-43.1-43.1-43.1-23.7,0-43.1,19.3-43.1,43.1 0,14 6.8,27.1 18.3,35.2 3.4,2.4 4.9,6.8 3.6,10.8-1.3,4-5,6.7-9.2,6.7h-99.5v99.7c0,4.2-2.7,7.9-6.7,9.2-4,1.3-8.4-0.2-10.8-3.6-8.1-11.5-21.2-18.3-35.2-18.3-23.7,0-43.1,19.3-43.1,43.1 0,23.7 19.3,43.1 43.1,43.1 14,0 27.1-6.8 35.2-18.3 2.4-3.4 6.8-4.9 10.8-3.6 4,1.3 6.7,5 6.7,9.2v99.7h77.4c-6.3-9.9-9.8-21.5-9.8-33.4 0-34.4 28-62.3 62.3-62.3 34.4,0 62.3,28 62.3,62.3 0.1,11.9-3.4,23.5-9.6,33.4zm87,19.2h-109.3c-4.2,0-7.9-2.7-9.2-6.7-1.3-4 0.2-8.4 3.6-10.8 11.5-8.1 18.3-21.2 18.3-35.2 0-23.7-19.3-43.1-43.1-43.1-23.7,0-43.1,19.3-43.1,43.1 0,14 6.8,27.1 18.3,35.2 3.4,2.4 4.9,6.8 3.6,10.8-1.3,4-5,6.7-9.2,6.7h-109.1c-5.3,0-9.6-4.3-9.6-9.6v-87.1c-9.9,6.3-21.4,9.8-33.4,9.8-34.4,0-62.3-28-62.3-62.3 0-34.4 28-62.3 62.3-62.3 12,0 23.6,3.5 33.4,9.8v-87.1c0-5.3 4.3-9.6 9.6-9.6h87.1c-6.3-9.9-9.8-21.5-9.8-33.4 0-34.4 28-62.3 62.3-62.3 34.4,0 62.3,28 62.3,62.3 0,12-3.5,23.6-9.8,33.4h87.1c5.3,0 9.6,4.3 9.6,9.6v87.1c9.9-6.3 21.4-9.8 33.4-9.8 34.4,0 62.3,28 62.3,62.3 0,34.4-28,62.3-62.3,62.3-12,0-23.6-3.5-33.4-9.8v87.1c-5.68434e-14,5.3-4.3,9.6-9.6,9.6z">
                        </path>
                        <animateTransform attributeName="transform" attributeType="XML" type="rotate" from="0 256 256" to="360 256 256" dur="10s" repeatCount="indefinite" />
                    </g>
                </svg>
            </button>
        </div>
        <div class="hamburger-menu">
            <input class="visually-hidden" id="hamburger-accordion-input" type="checkbox" name="burger-menu">
            <label for="hamburger-accordion-input">
                Navigation Menu
                <!-- https://www.svgrepo.com/svg/352109/hamburger -->
                <svg class="clickable" id="hamburger-icon" width="100%" height="100%" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                    <g id="hamburger-top">
                        <path d="M58.64 224 h394.72c34.57 0 54.62-43.9 34.82-75.88C448 83.2 359.55 32.1 256 32c-103.54.1-192 51.2-232.18 116.11C4 180.09 24.07 224 58.64 224z M384 112a16 16 0 1 1-16 16 16 16 0 0 1 16-16z M256 80a16 16 0 1 1-16 16 16 16 0 0 1 16-16z m-128 32a16 16 0 1 1-16 16 16 16 0 0 1 16-16z"></path>
                    </g>
                    <g id="hamburger-mid-1">
                        <path d="M464 256H48a48 48 0 0 0 0 96h416a48 48 0 0 0 0-96z"></path>
                    </g>
                    <g id="hamburger-mid-2">
                        <path d="M464 256H48a48 48 0 0 0 0 96h416a48 48 0 0 0 0-96z"></path>
                    </g>
                    <g id="hamburger-bot">
                        <path d="M16 386 H32a16 16 0 0 0-16 16v16a64 64 0 0 0 64 64h352a64 64 0 0 0 64-64v-16a16 16 0 0 0-16-16z"></path>
                    </g>
                </svg>
            </label>
            <!-- If adding new items, add transition delay and check media query screen width still makes sense in nav.css -->
            <ul>
                <li>
                    <h2 class="text-xl tight-layout">
                        <a href="#" class="button-fade-text clickable text-strikethrough">
                            Writing
                        </a>
                    </h2>
                </li>
                <li>
                    <h2 class="text-xl tight-layout">
                        <a href="#" class="button-fade-text clickable text-strikethrough">
                            Projects
                        </a>
                    </h2>
                </li>
                <li>
                    <h2 class="text-xl tight-layout">
                        <a href="#" class="button-fade-text clickable text-strikethrough">
                            Photos
                        </a>
                    </h2>
                </li>
                <li>
                    <h2 class="text-xl tight-layout">
                        <a href="#" class="button-fade-text clickable text-strikethrough">
                            About
                        </a>
                    </h2>
                </li>
            </ul>
        </div>
    </nav>
</header>

<main class="container">
<div class="main-grid">
    <section class="card" id="header-box">
        <div class="heading">
            <h1 class="text-4xl tight-layout">
                <em><span class="text-switch text-face-cursor">Hello,</span></em> you've found my website!
            </h1>
        </div>
    </section>
    <section class="card" id="main-box">
        <link rel="stylesheet" href="styles/shapes.css">
        <div class="shapes" data-configuration="1" data-roundness="2" data-numshapes="4" data-numrounds="6" data-intervalms="3141">
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
            <script>
                function changeShapes() {
                    for (const e of document.getElementsByClassName("shapes")) {
                        const data = e.dataset; 
                        const shapesIntervalMs = data.intervalms, 
                              shapesConfigs = data.numshapes,
                              shapesRounds = data.numrounds;
                        setInterval(() => {
                            data.configuration = rand(1, shapesConfigs);
                            data.roundness = rand(1, shapesRounds);
                        }, shapesIntervalMs);
                    }
                }
                changeShapes();
            </script>
        </div>
    </section>
    <section class="card" id="left-box">
        <link rel="stylesheet" href="styles/hovercard.css">
        <div class="hovercard">
            <div class="hovercard-content">
                <h2 class="hovercard-title | text-2xl tight-layout">
                    What makes a dad joke?
                </h2>
                <div class="hovercard-subtitle">
                    <p class="text-typing | text-base">When it's apparent.</p>
                </div>
            </div>
            <script>
                // we want to keep a border, but expand the content box to cover the border on hover 
                // border-width doesn't accommodate percentages, so need to calculate effective scaling
                function setHovercardScaling() {
                    for (const card of document.getElementsByClassName("hovercard")) {
                        const compStyle = getComputedStyle(card, null), 
                              bw = parseFloat(compStyle.getPropertyValue('border-width')), 
                              w = parseFloat(compStyle.width),
                              h = parseFloat(compStyle.height);
                        // round up to cover pixel errors probably due to floating point issues
                        card.style.setProperty("--scale-x", Math.round(100 + 2 * 100 * bw/w + 0.5)/100.0);
                        card.style.setProperty("--scale-y", Math.round(100 + 2 * 100 * bw/h + 0.5)/100.0);
                    }
                }
                window.addEventListener("DOMContentLoaded", setHovercardScaling)
                window.addEventListener("resize", setHovercardScaling)
            </script>
        </div>
    </section>
    <section class="card" id="right-box">
        <link rel="stylesheet" href="styles/glowcard.css">
        <div class="glowcard">
            <div class="glowcard-border"></div>
            <div class="glowcard-content">
                <h2 class="glowcard-title | text-2xl tight-layout">
                    just horsing around
                </h2>
            </div>
            <script>
                const setGlowcardRect = createSetElementPositionCallback("glowcard"),
                      setGlowcardScrollOffset = createSetScrollOffsetCallback("glowcard");
                window.addEventListener("DOMContentLoaded", setGlowcardRect);
                window.addEventListener("resize", setGlowcardRect);
                window.addEventListener("scroll", setGlowcardScrollOffset);
            </script>
        </div>
    </section>
</div>
</main>

<footer class="container">
    <div id="footer-waves">
        <svg class="waves" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 50" preserveAspectRatio="none" shape-rendering="auto">
            <defs>
                <path id="wave1" d="M-240 25 c 40 20 80 20 120 0 s 80 -20 120 0 s 80 20 120 0 s 80 -20 120 0 v25h-480z"></path>
                <path id="wave2" d="M-240 25 c 20 -12 40 -12 60 0 s 40 12 60 0 s 40 -12 60 0 s 40 12 60 0 s 40 -12 60 0 s 40 12 60 0 s 40 -12 60 0 s 40 12 60 0 v25h-480z"></path>
                <path id="wave3" d="M-240 25 c 8 -6 20 -12 24 0 s 16 6 24 0 s 20 -12 24 0 s 16 6 24 0 s 20 -12 24 0 s 16 6 24 0 s 20 -12 24 0 s 16 6 24 0 s 20 -12 24 0 s 16 6 24 0 s 20 -12 24 0 16 6 24 0 s 20 -12 24 0 s 16 6 24 0 s 20 -12 24 0 s 16 6 24 0 s 20 -12 24 0 s 16 6 24 0 s 20 -12 24 0 s 16 6 24 0 v25h-480z"></path>
                <path id="wave4" d="M-240 22 c 5 0  10  11 15  11 c 5 0  10 -16 15 -16c 5 0  10  21 15  21c 5 0  10 -26 15 -26c 5 0  10  31 15  31c 5 0  10 -36 15 -36c 5 0  10  41 15  41c 5 0  10 -46 15 -46c 5 0  10  46 15  46c 5 0  10 -41 15 -41c 5 0  10  36 15  36c 5 0  10 -31 15 -31c 5 0  10  26 15  26c 5 0  10 -21 15 -21c 5 0  10  16 15  16c 5 0  10 -11 15 -11c 5 0  10  11 15  11c 5 0  10 -16 15 -16c 5 0  10  21 15  21c 5 0  10 -26 15 -26c 5 0  10  31 15  31c 5 0  10 -36 15 -36c 5 0  10  41 15  41c 5 0  10 -46 15 -46c 5 0  10  46 15  46c 5 0  10 -41 15 -41c 5 0  10  36 15  36c 5 0  10 -31 15 -31c 5 0  10  26 15  26c 5 0  10 -21 15 -21c 5 0  10  16 15  16c 5 0  10 -11 15 -11"></path>
            </defs>
            <g class="waves-parallax">
                <use xlink:href="#wave1" y="0"/>
                <use xlink:href="#wave2" y="4"/>
                <use xlink:href="#wave3" y="12"/>
                <use xlink:href="#wave4" y="0" vector-effect="non-scaling-stroke" fill="none" stroke-width="1"/>
            </g>
        </svg>
    </div>
</footer>

</body>

<script>
    applyThemes();
    applyTextEffects();
</script>

</html>